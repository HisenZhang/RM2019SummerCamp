# 2019RobomasterSummerCamp设计方案
## 需求分析
### 各模块功能实现方案
机械方案在集体讨论后, 由机械负责人陈文潇最初最后决定和微调.

#### 存弹机构

球的数量已知，固定为30个，所以我们因步枪弹夹产生灵感，将每一个球的位置整齐排列,三个储球弹夹并联成为出球机构（每个储球弹夹内储存10个球）。通过单槽波轮的旋转一次吐出一颗球，而出球机构整体被固定在升降机构上，通过升降机构，底盘移动和推进机构三个自由度实现定位放球。
     
#### 存杯机构

能量仓数量固定为10个，我们将10个能量仓层叠后水平放置，固定不动。每一个能量仓之间有一个金属卡片，金属卡片通过使用弹簧上下移动，每弹开一个金属卡片，即解除一个能量仓的锁定，此时放杯机构方能将能量仓取走。（由于金属卡片未弹开的能量仓处于锁定状态，所以一次只会取走一个能量仓。）

#### 放杯机构

取走能量仓的放杯机构（爪夹）有一个90度的旋转自由度，取走能量仓后会将能量仓旋转九十度，此时杯口朝上，而整个放杯机构和储杯机构整体在放球机构的下方，此时能量球可以通过重力进入能量仓，实现装配和放置。

### 动力选型
> 根据所需动作方案，进行计算，选出合适的电机或者气缸……

底盘驱动使用3508电机, 数量4
升降使用3508带动丝杆, 数量2
伸展机构3508带动丝杆, 数量1
舵机型号待定


### 传感器选型
> 根据所选的方案，决定用什么样的传感器。并根据需求确定传感器参数

#### 摄像头
- USB接口
- 120fps
- 分辨率640x480

### 软件方向需求分析文档
> 分析嵌入式和算法分别要完成什么工作。

本方案中采用妙算作为主控, 上位机计算路径, 因此算法与嵌入式的工作结合紧密.

- 上位机计算路径, 把路径信息发送到主控, 由主控计算轨迹;
- 减少各环节通讯链路数量以保证系统稳定性;
- 统一底层控制(底盘控制)和中层控制(轨迹PID, etc).

### 软件方案
> 算法和嵌入式的分工是怎么样的，哪部分由嵌入式完成，哪部分是有算法完成。

在软件方案中, 嵌入式需完成:

- 底盘电机控制PID
- 轨迹PID
- 视觉定位
- 读裁判系统状态
- 手动遥控方案

算法需要完成:

- 上位机开发
- 路径规划算法
- 妙算与上位机通讯协议

## 模块布局
### 各模块的空间布局
![](https://img.vim-cn.com/7e/94c6e95401addc3308ae92e90e11781f44b747.png)

底盘为基础, 中间为垂直升降机构, 上设伸展机构, 再承接放杯,存杯存球机构. 放杯在前,存杯在后, 两者整体在存球机构的下方.

这样的设计保证可以灵活的供弹, 可以适应放杯或不放杯两种不同的需求.



### 给出整体的硬件框图，并阐述为什么这样布局。考虑了哪些（布线、接口、带宽等）
![](https://img.vim-cn.com/53/fbea97d1732c5826e4135b6bf0d9d34294a34c.png)

这个设计迎合本项目将底层和中层控制代码统一到妙算ROS中的目标, 底盘的部分(C620和电机)均直接由妙算控制, 以200Hz发送控制信息. 

场地信息的读取通过串口, 和裁判系统相连. 考虑到带宽和稳定性, 视觉定位所需的摄像头亦通过USB与妙算相连.

中心板的作用为妙算失效时候的备份方案, 允许用户通过遥控器来操作机器人. 

### 给出模块与模块的连接固定方式，并考虑如何拆装和维修

机械部分分为四个模块
- 底盘&升降
- 存杯机构
- 放杯机构
- 存球机构

由于每个模块都是板块化设计, 具体尺寸等模块尺寸确定之后再确定.